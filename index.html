<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Work Flow</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,sans-serif;
  transition:.3s ease;
}

/* ===== THEMES ===== */
.theme1{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:white;}
.theme2{background:#111827;color:white;}
.theme3{background:#0b3d3d;color:#e0ffff;}
.theme4{background:#1e1e2f;color:#fff;}
.theme5{background:#101820;color:#f8fafc;}
.theme6{background:#002b36;color:#eee8d5;}
.theme7{background:#1a1a1a;color:#f3f4f6;}
.theme8{background:#f4f6f8;color:#1f2937;}
.theme9{background:#0a192f;color:#ccd6f6;}
.theme10{background:#2d1b69;color:#fff;}

.glass{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(15px);
  border:1px solid rgba(255,255,255,0.15);
  box-shadow:0 8px 32px rgba(0,0,0,0.4);
}

/* NAVBAR */
nav{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px 30px;
  position:sticky;
  top:0;
  z-index:100;
}
nav h1{margin:0;font-size:18px}

.nav-kpis{
  display:flex;
  gap:30px;
}
.kpi{text-align:center}
.kpi span{font-size:11px;opacity:.6;display:block}
.kpi b{font-size:18px}

.nav-right{
  display:flex;
  gap:15px;
  cursor:pointer;
}

/* FILTER */
.filter-popup,.theme-popup{
  position:absolute;
  top:65px;
  right:30px;
  padding:15px;
  border-radius:16px;
  display:none;
  width:240px;
}
.filter-popup input{
  width:100%;
  margin-bottom:8px;
  padding:6px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,.15);
  color:inherit;
}

/* CONTAINER */
.container{
  max-width:1600px;
  margin:auto;
  padding:30px;
}

/* ADD */
.card{
  padding:20px;
  border-radius:16px;
  margin-bottom:30px;
}
.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
}
input,select,textarea{
  padding:8px;
  border-radius:8px;
  border:none;
  background:rgba(255,255,255,.15);
  color:inherit;
}
button{
  background:#00c6ff;
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
}

/* TILE */
.tile-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,300px));
  gap:25px;
}

.tile{
  padding:18px;
  border-radius:18px;
  transition:.3s ease;
  cursor:pointer;
}
.tile:hover{transform:translateY(-5px)}

.small{font-size:11px;opacity:.7;margin-top:4px}
.badge{
  display:inline-block;
  padding:3px 8px;
  font-size:9px;
  border-radius:12px;
  margin-top:6px;
}
.selection{background:#2ecc71;}
.quotation{background:#3498db;}

.details{
  margin-top:10px;
  display:none;
  font-size:11px;
}
.tile.expanded .details{display:block}
</style>
</head>

<body class="theme1">

<nav class="glass">
  <h1>My Work Flow</h1>

  <div class="nav-kpis" id="navKpis"></div>

  <div class="nav-right">
    <span onclick="toggleFilter()">üîç</span>
    <span onclick="toggleTheme()">üé®</span>
  </div>

  <div class="filter-popup glass" id="filterPopup">
    <input type="text" id="filterProject" placeholder="Project name">
    <input type="text" id="filterCustomer" placeholder="Customer name">
    <input type="date" id="filterReceived">
    <input type="date" id="filterSent">
  </div>

  <div class="theme-popup glass" id="themePopup">
    <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:6px">
      ${Array.from({length:10},(_,i)=>`<div onclick="setTheme('theme${i+1}')" style="width:24px;height:24px;border-radius:50%;background:hsl(${i*36},70%,50%)"></div>`).join('')}
    </div>
  </div>
</nav>

<div class="container">

<div class="card glass">
  <div class="form-grid">
    <input id="project" placeholder="Project Name">
    <input id="customer" placeholder="Customer Name">
    <select id="coilType">
      <option>CHW</option>
      <option>DX</option>
      <option>CHW COMBI</option>
      <option>DX COMBI</option>
      <option>CHW + CHW COMBI</option>
      <option>DX + DX COMBI</option>
    </select>
    <input type="date" id="received">
    <button id="addBtn">Add</button>
  </div>
</div>

<div class="tile-grid" id="tileGrid"></div>

</div>

<script>
const $=id=>document.getElementById(id);
let projects=JSON.parse(localStorage.getItem('hvacProjects'))||[];

/* THEME */
function toggleTheme(){
  const p=$('themePopup');
  p.style.display=p.style.display==='block'?'none':'block';
}
function setTheme(t){
  document.body.className=t;
  localStorage.setItem('theme',t);
}
const savedTheme=localStorage.getItem('theme');
if(savedTheme)document.body.className=savedTheme;

/* FILTER */
function toggleFilter(){
  const p=$('filterPopup');
  p.style.display=p.style.display==='block'?'none':'block';
}
['filterProject','filterCustomer','filterReceived','filterSent']
.forEach(id=>$(id).addEventListener('input',render));

/* ADD */
$('addBtn').onclick=()=>{
  const p=$('project').value.trim();
  const c=$('customer').value.trim();
  const t=$('coilType').value;
  const r=$('received').value;
  if(!p||!c||!r)return;

  projects.push({
    id:Date.now(),
    project:p,
    customer:c,
    type:t,
    received:r,
    sent:'',
    selection:false,
    quotation:false,
    remarks:''
  });

  save();
  render();
};

function save(){
  localStorage.setItem('hvacProjects',JSON.stringify(projects));
}

/* RENDER */
function render(){

  const rec=projects.length;
  const sel=projects.filter(p=>p.selection).length;
  const quo=projects.filter(p=>p.quotation).length;

  $('navKpis').innerHTML=`
    <div class="kpi"><span>Received</span><b>${rec}</b></div>
    <div class="kpi"><span>Selection</span><b>${sel}</b></div>
    <div class="kpi"><span>Quotation</span><b>${quo}</b></div>
  `;

  let filtered=[...projects];

  const fp=$('filterProject').value.toLowerCase();
  const fc=$('filterCustomer').value.toLowerCase();
  const fr=$('filterReceived').value;
  const fs=$('filterSent').value;

  if(fp) filtered=filtered.filter(p=>p.project.toLowerCase().includes(fp));
  if(fc) filtered=filtered.filter(p=>p.customer.toLowerCase().includes(fc));
  if(fr) filtered=filtered.filter(p=>p.received===fr);
  if(fs) filtered=filtered.filter(p=>p.sent===fs);

  filtered.sort((a,b)=>new Date(b.received)-new Date(a.received));

  $('tileGrid').innerHTML='';

  filtered.forEach(p=>{
    const tile=document.createElement('div');
    tile.className='tile glass';

    let badges='';
    if(p.selection) badges+=`<span class="badge selection">Selection Sent</span>`;
    if(p.quotation) badges+=`<span class="badge quotation">Quotation Sent</span>`;

    tile.innerHTML=`
      <h3 onclick="this.closest('.tile').classList.toggle('expanded')">${p.project}</h3>
      <div class="small">${p.customer}</div>
      <div class="small">Type: ${p.type}</div>
      <div class="small">Received: ${p.received}</div>
      <div class="small">Sent: ${p.sent||'-'}</div>
      ${badges}

      <div class="details">
        <label>Sent Date</label>
        <input type="date" value="${p.sent||''}"
          onchange="update(${p.id},'sent',this.value)">
        <div style="margin-top:6px">
          <label><input type="checkbox" ${p.selection?'checked':''}
            onchange="update(${p.id},'selection',this.checked)"> Selection</label>
          <label><input type="checkbox" ${p.quotation?'checked':''}
            onchange="update(${p.id},'quotation',this.checked)"> Quotation</label>
        </div>
        <textarea style="margin-top:6px;width:100%"
          onchange="update(${p.id},'remarks',this.value)">${p.remarks||''}</textarea>
        <div style="margin-top:6px;color:red;cursor:pointer"
          onclick="deleteProject(${p.id})">Delete</div>
      </div>
    `;

    $('tileGrid').appendChild(tile);
  });
}

function update(id,key,value){
  const p=projects.find(x=>x.id===id);
  p[key]=value;
  save();
  render();
}

function deleteProject(id){
  projects=projects.filter(x=>x.id!==id);
  save();
  render();
}

render();
</script>

</body>
</html>
